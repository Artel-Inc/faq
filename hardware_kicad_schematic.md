# Рекомендации по работе со схемой в kicad.

Стиль это важно. Если проектируешь, проектируй красиво. 

Схема должна быть информативной, понятной, единообразной.

Схема может содержать заметки, расчеты, предупреждения. 

Если вы редактируете чужую схему, повторяйте ее стилистически. Не изобретай велосипед, унаследуй практики.

Если используете модули из других репозиториев, читайте `README.md`. Там могут быть важные замечания.

На сегодняшний день разработка новых плат ведется в метрической системе координат. Разработка схемотехники как и прежде в дюймовой.

## Общие рекомендации

| Рекомендации:                                                                                                                                                                                                                                                                            | Почему это важно:                                                                                               |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------- |
| Главный лист называется main, включает в себя устройство целиком или же отражает межблочные соединения.                                                                                                                                                                                  | - Необходимо для автоматизации<br />- Всегда понятно с чего начинать                                            |
| Формат листа определяется геометрией схемы. На листе не должно быть свободного места.<br/>Предпочтительные форматы: А2, А3, А4, А5                                                                                                                                                       | - Экономия при печати<br />- Повышает читаемость                                                                |
| Сигнал на листе должен распространяться: <br />- Слева-направо<br />- Сверху-вниз.<br />NOTE: Сверху питания, снизу земля                                                                                                                                                                | - Повышает читаемость                                                                                           |
| Схема должна быть разбита на логические блоки. Логические блоки должны иметь название.<br />![image-20240116042859050](design//image-20240116042859050.png)                                                                                                                              | - Повышает читаемость                                                                                           |
| Типичный шаблон разбиения листа.<br/>- Питание<br/>- Основные каскады<br/>- Дополнительные каскады                                                                                                                                                                                       | - Повышает читаемость                                                                                           |
| Заполняйте рамку. Обязательные поля:<br />- Дата<br />- Номер изм. (версия)<br />- Наименование (шифр проекта)<br />- Организация (в некоторых случаях расшифровка наименования)<br />- Разработал<br />- Утвердил<br />NOTE: Наименование может отличаться на разных листах             | Необходимо знать:<br />- Какой проект<br />- Кто автор<br />- Что на схеме                                      |
| Используйте универсальные компоненты для стандартизированных деталей таких как [Рекомендованный УГО]:<br/>- Резисторы [R_Small]<br/>- Конденсаторы [C_Small/C_Polarized_Small]<br/>- Индуктивности [L_Small]<br/>- Диоды...  [D_Small/LED_Small/D_Schottky_Small]<br />- Connector...... | - Small версии занимают меньше места<br />- Легко делать замену                                                 |
| Используйте символы питания только в случае множественного соединения.                                                                                                                                                                                                                   | - Меньше символов, меньше ошибок.                                                                               |
| Не используйте `инструмент шина`.                                                                                                                                                                                                                                                        | - Устаревший инструмент (создан для рисования жгутов проводов, на плате их нет)<br />- Используйте `метки цепи` |
| Избегайте использования `глобальных меток`.                                                                                                                                                                                                                                              | - Добавляет разночтения<br />- Усложнят понимание схемы                                                         |
| Используйте `графисекую линию` для иллюстрации гальванической развязки (2 линии). Указывайте `текстом` принадлежность домену питания (ex. gnd/gnda).<br />![image-20240116035856348](design//image-20240116035856348.png)                                                                | - Позволит визуально оценивать принадлежность группы сигналов, без открытия листа                               |
| Обязательно указывайте тип сигнала при использовании `иерархического листа` .                                                                                                                                                                                                            | - Позволяет автоматизировать проверку сигналов                                                                  |
| Используйте `иерархический лист` для каскадов с повторяющейся схемой (более 2х раз).                                                                                                                                                                                                     | - Позволит скопировать топологию платы<br />- Избавит от повторяющейся работы                                   |
| В случае наличия большого количества иерархических листов, разработайте алгоритм нумерации одинаковых блоков. Отличный вариант смещение разряда `обозначений`.<br />![image-20240116041316421](design//image-20240116041316421.png)                                                      | - Автоматизирует расстановку шелкографии<br />- Повышает читаймость                                             |
| Для компонентов не требующих установки указывайте `DNP` и `исключить из перечня элеметов`.<br />![image-20240116041546673](design//image-20240116041546673.png)                                                                                                                          | - Избавит закупщиков от проблем                                                                                 |
| Не размещайте текст внутри компонент. Особенно касается резисторов.                                                                                                                                                                                                                      | - Значительно усложняет доступ к меню редактирования.                                                           |
| Включайте отображения критической информации. Используйте единообразный порядок полей.<br/>- Напряжение конденсаторов.<br/>- Точность резисторов <1%<br />![image-20240116042149164](design//image-20240116042149164.png)                                                                | - Упрощает выявление ошибок.                                                                                    |
| Добросовестно заполняйте свойства символа.<br />![image-20240116042638029](design//image-20240116042638029.png)                                                                                                                                                                          | - Упрощает закупку <br/>- Позволяет быстро подобрать аналог <br/>- Возможность глобальных замен поставщиков     |
| Используйте единую систему наименования полей свойств.<br />Обаятельные поля: <br/>- lcsc<br/>- Comments                                                                                                                                                                                 | - Автоматизация                                                                                                 |
| В случае необходимости именовать одну цепь разорванную резистором используйте префикс `_`.<br />![image-20240116043407965](design//image-20240116043407965.png)                                                                                                                          | - Читаемость на плате<br />- В некоторых случаях возможность согласования линии                                 |
| Стремитесь располагать детали на общих осях симметрии (в том числе в разных каскадах) [синяя линия]. <br/>Так же располагать детали на равном удалении друг от друга и близлежащих проводников [красная стрелка].<br />![image-20240116043729415](design//image-20240116043729415.png)   | - Повышает читаемость                                                                                           |
| Делайте отвод дорожки от пинов. В примере 2 клетки (сетка 50mil). <br />![image-20240116044512738](design//image-20240116044512738.png)<br />![image-20240116050548677](design//image-20240116050548677.png)                                                                             | - Удобство последующего редактирования.<br/> - Не блокирует возможность подключить еще один проводник к точке.  |
| Не изменяйте сетку. Сетка должна быть выбирается один раз при создании проекта. Оставьте по умолчанию или выберете 50mil.                                                                                                                                                                | - Исключает ошибки стыковки элементов                                                                           |
| Старайтесь делать каскады читаемыми, компактным.<br/>Было:<br/>![](design/2025-03-06-11-20-36-image.png)<br/>Стало:![](design/2025-03-06-11-20-56-image.png)                                                                                                                             | - Повышает читаемость                                                                                           |
| Старайтесь размещать элементы на одной оси, в одном направлении, избегайте пересечения.<br/>Было:![](design/2025-03-06-11-24-13-image.png)<br/>Стало:![](design/2025-03-06-11-24-27-image.png)                                                                                           | - Повышает читаемость                                                                                           |
| Делаете единообразные интервалы.<br/>Было:![](design/2025-03-06-11-25-44-image.png)<br/>Стало:![](design/2025-03-06-11-25-56-image.png)                                                                                                                                                  | - Повышает читаемость                                                                                           |
| Не проводите перпендикулярную линию прямо к выводу детали. <br/>Было:![](design/2025-03-06-11-27-30-image.png)<br/>Стало:![](design/2025-03-06-11-27-41-image.png)                                                                                                                       | - Удобство редактирования                                                                                       |

## Разработка УГО

Для УГО справедливы общие рекомендации.
Более детальные требования к распорядку работы с библиотекой описаны в репозитории оной.

| Рекомендации:                                                                                                                                                                                   | Почему это важно:                                                                                            |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------ |
| Не изменяй кардинально стиль обозначения. Унаследуй стиль библиотеки в которой работаешь. Лучшая практика повторять стиль официальной библиотеки.                                               | - Не создавай себе бессмысленную работу<br />- Позволяет унаследовать опыт сообщества                        |
| Шаг пинов должен быть 100 mil. Можно изменять сетку для отрисовки схематичных изображений.                                                                                                      | - Избавит от проблемы стыковки компонентов из разных библиотек.                                              |
| Центр УГО должен находится в центре осей координат. Если это сделать невозможно, допускается смещение по одной из осей.                                                                         | - Единообразие со стандартной библиотекой                                                                    |
| Обозначай гальваническую развязку пунктирной линией.<br />![image-20240116151333000](design//image-20240116151333000.png)                                                                       | - Упрощает чтение схемы                                                                                      |
| Рисуй, УПРОЩЕННО внутреннюю структуру типовых элементов.<br />![image-20240116151306828](design//image-20240116151306828.png)                                                                   | - Дополнительно позволяет определить правильность подключения                                                |
| Не изобретай свое собственное обозначения типичных деталей.<br />![image-20240116151736748](design//image-20240116151736748.png)                                                                | - Не стандартное отображение влечет путаницу в чтении схемы.                                                 |
| Используй длину вывода 100mil. В случае нехватки места для размещения обозначения, может быть кратно увеличена.                                                                                 | - Повышает читаемость<br/> - Исключает проблему стыковки                                                     |
| Используй наложение невидимых контактов в случае дублирование сигналов требующих обязательного соединения.<br />![image-20240116152449690](design//image-20240116152449690.png)                 | - Упрощает схему                                                                                             |
| Если чип подразумевает различные варианты расположения сигналов. Не скрывай, не используемые выводы.<br />![image-20240116152932158](design//image-20240116152932158.png)                       | - Избавляет от необходимости отрисовыват все варианты распиновок                                             |
| Используй универсальные УГО, для каноничных чипов. Которые могут произвести разные производители с разными наименованиями.<br />![image-20240116153226327](design//image-20240116153226327.png) | - Пере используй, оптимизируй.                                                                               |
| Делай заливку внутри блока.<br />![image-20240116153326691](design//image-20240116153326691.png)                                                                                                | - Единообразие с стандартной библиотекой                                                                     |
| Не создавай у УГО поля, присущие конкретным поставщикам, делай это на схеме а не в библиотеки.<br />![image-20240116153542511](design//image-20240116153542511.png)                             | - Деталь станет универсальной для всех.<br/>\- Избавит от ошибки неактуального P/N и неподходящего "аналога" |
| Создаешь новую деталь, поищи максимально похожее обозначение в стандартной библиотеки и унаследуй его.                                                                                          | - Единообразие<br/>- Меньше работы<br/>- Меньше ошибок                                                       |
| Типичное расстояние между выводами в УГО = 100 mil. <br/>шаг установки выводов 100mil<br/>![](design/2025-03-06-11-29-52-image.png)                                                             | - Единообразие                                                                                               |
| Расточение от первого вывода до края уго<br/>не должно быть меньше чем шаг выводов (100 mil)<br/>![](design/2025-03-06-11-30-26-image.png)                                                      | - Единообразие                                                                                               |
| Учитывайте при проектировании УГО будущие потенциальные подключения на схеме.![](design/2025-03-06-11-32-28-image.png)                                                                          |                                                                                                              |

## Разработка схемы

Рекомендации по разработке схемы формулируются текущей командой, определяются опытом и внутренним распорядком.

| Рекомендации:                                                                                                                                                                                                                                 | Почему это важно:                                                                                            |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------ |
| В случае если схема рассчитана с конкретной деталью. Но в процессе эксплорации она была заменена, исправь это в схеме. Если же деталь была временна заменена на аналог, P/N не соответствует наименованию детали. Укажите в конце имени `(!)` | - Позволяет при анализе схемы оценить допущения                                                              |
| Не используемые выводы, функции выводите на резисторы или тест-поинты. Исходя из доступного пространства, в соответствии с потенциальным расширением функций.                                                                                 | - Позволяет исследовать деталь, без разработки новой платы.<br />- Позволяет произвести быстрое исправление. |
| Все сигналы спрятанные на внутренних слоях должны иметь возможность размыкания на внешних слоях. Это может быть реализована по средствам отпайки резисторов, или отгибания вывода.                                                            | - Доработка ошибок на плате, без изготовления нового образца.                                                |
| Не используйте префиксную нотацию для именования различных сигналов.                                                                                                                                                                          | - В некоторых случаях блокирует возможность автоматического определения класса цепи.                         |
| Выбирайте детали имеющие аналоги у разных производителей.                                                                                                                                                                                     | - Избавляет от необходимости изменения платы в случае отсутствие детали у поставщика                         |
| Выбирайте детали имеющие корпус `с ножками` под поверхностный монтаж.                                                                                                                                                                         | - Значительно упрощает отладку<br/>- Упрощает сборку<br/>- Снижает требования к PCB                          |
| Прописывайте аналоги и P/N детали                                                                                                                                                                                                             | - Позволяет автоматизировать производство плат<br />- На плате установлена та деталь что выбрал разработчик  |
| Не плодите сущности. Стремитесь уменьшению количество позиций в BOM. Используйте одинаковые детали по возможности, как в рамках одного проекта, так и в рамках всей продукции.                                                                | - Каждая позиция это дополнительная работа                                                                   |
